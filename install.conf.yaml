- defaults:
    link:
      relink: true
      force: true

- clean: ['~']

- link:
    ~/.irssi: irssi
    ~/.config/nvim:
      create: true
      path: vim
    ~/.oh-my-zsh: zsh/oh-my-zsh
    ~/.tmux: tmux
    ~/.tmux.conf: tmux/tmux.conf
    ~/.tmux-powerlinerc: tmux/tmux-powerlinerc
    ~/.vim: vim
    ~/.vimrc: vim/vimrc
    ~/.virtualenvs/postactivate:
      create: true
      path: venv/postactivate
    ~/.virtualenvs/postdeactivate:
      create: true
      path: venv/postdeactivate
    ~/.zshrc: zsh/zshrc
    ~/.zsh_aliases: zsh/zsh_aliases

- shell:
  - ["if ! type \"zsh\" > /dev/null; then brew install zsh; fi", Installing zsh]
  - ["if ! grep -Fxq \"$(which zsh)\" /etc/shells; then sudo sh -c 'echo \"$(which zsh)\" >> /etc/shells'; fi", Registering zsh as shell]
  - ["chsh -s $(which zsh)", Changing user shell]
  - ["if ! type \"pip\" > /dev/null; then brew install python; brew unlink python && brew link python; fi", Installing python from brew]
  - ["bash -c 'PIP_REQUIRE_VIRTUALENV=\"\" pip install -q virtualenv virtualenvwrapper'", Installing virtualenvwrapper]
  - [brew install neovim ccat tmux, Installing brew packages]
  - [mkdir -p ~/.dotfiles_local, Creating local override directory]
  - [git submodule update --init --recursive, Installing submodules]
  - [vim +PlugInstall +qall &, Installing Vim plugins]
  - [./fonts/powerline/install.sh &, Installing powerline fonts]
  - [pip install flake8 flake8-docstrings &, Installing linters]
  - ["if [ \"$ZSH_NAME\" ]; then source ~/.zshrc; fi", Sourcing zshrc]
  - [tmux source-file ~/.tmux.conf; ./tmux/plugins/tpm/scripts/install_plugins.sh, Sourcing tmux.conf]

